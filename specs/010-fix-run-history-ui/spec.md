# Feature Specification: Fix Run History UI & Add Directory Access

**Feature Branch**: `010-fix-run-history-ui`
**Created**: 2026-01-13
**Status**: Draft
**Input**: User description: "fix the run history showing weird running sessions if it was not completed normally, and also it show no end time if it was not completed , and there should be a button to click to open the directory where the run data and screenshots are stored"

## User Scenarios & Testing

### User Story 1 - Clear Status for Incomplete Runs (Priority: P1)

Users encounter confusing UI when a run crashes or is interrupted, showing incorrect status or "weird" data. The system should gracefully handle these states.

**Why this priority**: Correct information is critical for user trust and debugging. Users are currently confused by "weird" sessions.

**Independent Test**: Can be tested by force-killing a run and verifying the history UI displays it correctly without errors or confusing labels.

**Acceptance Scenarios**:

1. **Given** a run that was force-killed or crashed (no end time recorded), **When** the user views the Run History, **Then** the status should reflect that it is not running (e.g., "Incomplete" or "Interrupted") rather than "Running" or an undefined state.
2. **Given** an incomplete run, **When** the user views the "End Time" column, **Then** it should display a clear placeholder (e.g., "N/A" or "-") instead of an error or empty space that looks broken.
3.  **Given** a run that is currently active, **When** view history, **Then** status is "Running".

---

### User Story 2 - Open Run Directory (Priority: P2)

Users need to inspect screenshots and logs generated by a run. Navigating manually to the AppData folder is tedious.

**Why this priority**: Adds significant convenience and speeds up the workflow for analyzing run results.

**Independent Test**: Can be tested by clicking the new button and verifying the file explorer opens to the correct path.

**Acceptance Scenarios**:

1. **Given** a list of runs in the History view, **When** the user looks at a run entry, **Then** there is a visible button or icon labeled "Open Folder" (or similar).
2. **Given** the user clicks the "Open Folder" button for Run #123, **When** the action triggers, **Then** the OS file explorer opens directly to the folder containing Run #123's artifacts.
3. **Given** the folder does not exist (e.g. deleted manually), **When** clicked, **Then** the system should handle the error gracefully (e.g. show a toast notification) rather than crashing.

## Requirements

### Functional Requirements

- **FR-001**: The Run History UI MUST display a fallback value (e.g., "N/A", "-", or "Incomplete") for the "End Time" field if the data is missing or null.
- **FR-002**: The system MUST differentiate between currently active runs and runs that are incomplete but no longer active (zombie sessions), updating their status presentation accordingly.
- **FR-003**: The Run History UI MUST include an interactive element (button/icon) for each run entry to "Open Run Directory".
- **FR-004**: Clicking the "Open Run Directory" element MUST launch the operating system's default file manager pointed at the absolute path of that specific run's storage directory.
- **FR-005**: If the run directory cannot be opened (path invalid or missing), the system MUST display a user-friendly error message.

### Key Entities

- **RunRecord**: Represents a single execution session, containing status, start_time, end_time, and storage_path.

## Success Criteria

### Measurable Outcomes

- **SC-001**: Incomplete/crashed runs display with consistent formatting (no visual glitches) 100% of the time.
- **SC-002**: Users can open the artifact directory for any existing run with a single click.
- **SC-003**: Zero application crashes when attempting to open a non-existent directory from the history view.
